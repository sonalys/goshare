// Code generated by ogen, DO NOT EDIT.

package server

import (
	"context"
)

// Handler handles operations described by OpenAPI v3 specification.
type Handler interface {
	ExpensesHandler
	HealthcheckHandler
	LedgersHandler
	RecordsHandler
	UsersHandler
	// NewError creates *ErrorResponseStatusCode from error returned by handler.
	//
	// Used for common default response.
	NewError(ctx context.Context, err error) *ErrorResponseStatusCode
}

// ExpensesHandler handles operations described by OpenAPI v3 specification.
//
// x-ogen-operation-group: Expenses
type ExpensesHandler interface {
	// LedgerExpenseCreate implements LedgerExpenseCreate operation.
	//
	// Creates a new expense record.
	//
	// POST /ledgers/{ledgerID}/expenses
	LedgerExpenseCreate(ctx context.Context, req *Expense, params LedgerExpenseCreateParams) (*LedgerExpenseCreateOK, error)
	// LedgerExpenseGet implements LedgerExpenseGet operation.
	//
	// Retrieves an expense.
	//
	// GET /ledgers/{ledgerID}/expenses/{expenseID}
	LedgerExpenseGet(ctx context.Context, params LedgerExpenseGetParams) (*Expense, error)
	// LedgerExpenseList implements LedgerExpenseList operation.
	//
	// Lists all expenses in the ledger.
	//
	// GET /ledgers/{ledgerID}/expenses
	LedgerExpenseList(ctx context.Context, params LedgerExpenseListParams) (*LedgerExpenseListOK, error)
}

// HealthcheckHandler handles operations described by OpenAPI v3 specification.
//
// x-ogen-operation-group: Healthcheck
type HealthcheckHandler interface {
	// Healthcheck implements Healthcheck operation.
	//
	// Check if the service is healthy.
	//
	// GET /healthcheck
	Healthcheck(ctx context.Context) error
}

// LedgersHandler handles operations described by OpenAPI v3 specification.
//
// x-ogen-operation-group: Ledgers
type LedgersHandler interface {
	// LedgerCreate implements LedgerCreate operation.
	//
	// Creates a new ledger. A user can have a maximum of 5 ledgers.
	//
	// POST /ledgers
	LedgerCreate(ctx context.Context, req *LedgerCreateReq) (*LedgerCreateOK, error)
	// LedgerList implements LedgerList operation.
	//
	// Lists all ledgers.
	//
	// GET /ledgers
	LedgerList(ctx context.Context) (*LedgerListOK, error)
	// LedgerMemberAdd implements LedgerMemberAdd operation.
	//
	// Adds a new member to the Ledger.
	//
	// POST /ledgers/{ledgerID}/members
	LedgerMemberAdd(ctx context.Context, req *LedgerMemberAddReq, params LedgerMemberAddParams) error
	// LedgerMemberList implements LedgerMemberList operation.
	//
	// Lists all ledger members and their balances.
	//
	// GET /ledgers/{ledgerID}/members
	LedgerMemberList(ctx context.Context, params LedgerMemberListParams) (*LedgerMemberListOK, error)
}

// RecordsHandler handles operations described by OpenAPI v3 specification.
//
// x-ogen-operation-group: Records
type RecordsHandler interface {
	// LedgerExpenseRecordCreate implements LedgerExpenseRecordCreate operation.
	//
	// Creates a new expense record.
	//
	// POST /ledgers/{ledgerID}/expenses/{expenseID}/records
	LedgerExpenseRecordCreate(ctx context.Context, req *LedgerExpenseRecordCreateReq, params LedgerExpenseRecordCreateParams) (*Expense, error)
	// LedgerExpenseRecordDelete implements LedgerExpenseRecordDelete operation.
	//
	// Delete an expense record.
	//
	// DELETE /ledgers/{ledgerID}/expenses/{expenseID}/records/{recordID}
	LedgerExpenseRecordDelete(ctx context.Context, params LedgerExpenseRecordDeleteParams) error
}

// UsersHandler handles operations described by OpenAPI v3 specification.
//
// x-ogen-operation-group: Users
type UsersHandler interface {
	// AuthenticationLogin implements AuthenticationLogin operation.
	//
	// Authenticate as the specified identity.
	//
	// POST /authentication/login
	AuthenticationLogin(ctx context.Context, req *AuthenticationLoginReq) (*AuthenticationLoginOK, error)
	// AuthenticationWhoAmI implements AuthenticationWhoAmI operation.
	//
	// Returns current information on the authenticated entity.
	//
	// GET /authentication/whoami
	AuthenticationWhoAmI(ctx context.Context) (*AuthenticationWhoAmIOK, error)
	// UserRegister implements UserRegister operation.
	//
	// Registers a new user.
	//
	// POST /users
	UserRegister(ctx context.Context, req *UserRegisterReq) (*UserRegisterOK, error)
}

// Server implements http server based on OpenAPI v3 specification and
// calls Handler to handle requests.
type Server struct {
	h   Handler
	sec SecurityHandler
	baseServer
}

// NewServer creates new Server.
func NewServer(h Handler, sec SecurityHandler, opts ...ServerOption) (*Server, error) {
	s, err := newServerConfig(opts...).baseServer()
	if err != nil {
		return nil, err
	}
	return &Server{
		h:          h,
		sec:        sec,
		baseServer: s,
	}, nil
}
